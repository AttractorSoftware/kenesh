/*!
 * Author: Soroka Anton 
 *
 * Name: jQuery.message
 * Version: 1.0
 * Requires: jQuery 1.8+
 * Requires: jQuery.mousewheel (https://github.com/brandonaaron/jquery-mousewheel)
 */
(function(c){var g=0;c.message=function(h){var e=g++,b=c.extend({form:"",onclose:function(a){a(!0)},onkeydown:function(a){}},h);b.form instanceof jQuery||(b.form=c(b.form));var d=c('<div class="jq-message"><div class="jq-message-body"><div class="jq-message-content"></div></div><div class="jq-message-helper"></div></div>'),f={close:function(){b.onclose.apply(b.form,[function(a){a&&(d.remove(),c(document).off("keydown.jq_message_"+e),c("dody").css("opacity","0.99"),setTimeout(function(){c("body").css("opacity",
"1")},0))}])},form:b.form,id:e};d.click(function(a){a.preventDefault();a.stopPropagation();f.close()});d.find(".jq-message-body").click(function(a){a.preventDefault();a.stopPropagation()});c(document).on("keydown.jq_message_"+e,function(a){b.onkeydown.apply(this,[a,b.form])});d.mousewheel(function(a){a.preventDefault()});d.find(".jq-message-body").mousewheel(function(a){var b=c(this),d=b.scrollTop(),e=parseInt(b.prop("scrollHeight"),10),b=b.outerHeight();0<a.deltaY&&0>=d||0>a.deltaY&&d>=e-b-1||a.stopPropagation()});
d.find(".jq-message-content").append(b.form);c("body").append(d);return f}}(jQuery));